# 발표 준비
시간 : 목요일 2시 (13일)
장소 : 강남 위워크 10층 
주제 : 3주 프로젝트 결과 발표

전달할 내용 : 어려움을 마주한 이야기, 그리고 어떻게 해결했는지에 대한 내용.
|👇
자료들을 잘 정리하는 시간도 필요할 듯 싶다. 


useForm 사용 이유
https://tech.inflab.com/202207-rallit-form-refactoring/react-hook-form/


# 흐름
## intro 
## 주요 기능 소개
## 에러 노트
## 회고
## Q&A

  


# 내가 만난 어려움 정리 목록 50 여개중 정리

1. 목데이터를 어떻게 만들어야하는지... 아예 감도 안잡힌다. 

2. 선택 질문 항목에 대한 각각의 제목들을 식별해서 그에 따른 UI 그려주는 방법이 뭐가 있을까??

3.  폼데이터 불러오는 것 어떻게?

4. 모든 form들의 state를 관리할 수가 없다. 어떻게 해야하는 걸까?  (useForm)
	 - form안에 너무 중첩돼어 Input들이 있어서... 어떻게 하면좋을지 (useFormContext)
		 - 하... 인풋이 공통 컴포넌트여서 각자 값을 주는 것이 생각보다 어렵다(register)
5. 이미지를 useForm안의 데이터로 녹이는 작업
	- 이미지는 useForm 안에서 독립적으로 post되도록 만들었습니다. 
6. 완료가 아닌 다음으로 가기를 눌렀을때도 폼이 보내지는 상황 
	- 기본에 충실하자!!!! 기본기가 중요 button의 type이 submit이었는데 button으로 바꾸니 해결
7. 템플릿을 불러온 이후 삭제 기능 
	- 불러온 템플릿의 마지막 Id를 읽어온 후 현재 Id의 state를 불러온 Id로 상태를 바꿔주니 해결 
8. react 서버로부터 이미지 보여주는 것도 어렵다.
	- base64로 디코딩, 인코딩 등등 별짓을 다해봤으나 실패

9. 관리자 설정하러 가기 버튼을 눌렀을떄 유효성검사가 이루어지고 싶은데... 에러 객체가 생기는 시점이 폼이 생성되는 시점이다
	- 관리자 설정하러가기 할떄 button에 type=input을 줘서 이때 폼을 날아가게 해야하나? 라고 생각했느데 그럼 백앤드 서버로 두번의 데이터가 넘어가게 되어 비효율적이다. 그럼 수동적으로 할 수 있는게 없을까? 하다가 찾게 된 것 -> Trigger 이라는 내장 함수 
	1. 모든 문제는 트리거가 됐을떄 errors 객체에 담겨서 한번 늦게 실행한다는 에러 발견
	![[스크린샷 2022-10-07 오전 10.25.57.png]]
	상황 : onClickHandler 함수 안에 있는 Trigger 함수는 세가지 유효성 검사를 수동으로 진행시켜 유효하지 않으면 이 함수 외부 스코프인 errors 객체에 객체를 추가시킨다.그런데 onClickHandler가 실행될 당시 Errors는 빈객체여서 아래에 있는 기능이!! 무효한 당연한 상황
	- true and false를 써서 값이 트루면 onClickTrigger 함수를 할 수 있게 하면 어떨까
	![[스크린샷 2022-10-07 오후 2.06.17.png]]
	async, await을 빼니깐 안된다... 조금 더 공부해보기 

10.  폼을 삭제했는데... 삭제한 form이 고객 페이지에서는 보여진다.
	- 삭제하기 위해 click한 애들의 아이디를 배열로 저장해서 완료버튼을 누를때 unregister하려고 했으나 생각대로 안됐고 하루 종일 했는데 안된 상황.
	- 다음 날 공식 문서에서 shouldUnregister : true를 발견하고 넣어봤는데 마지막에 있는 데이터만 자동으로 인식해서 폼으로 만들어지는 놀라운 함수를 발견했다. 
- 


# 버그 
1. 뒤에서 삭제를 했을떄는 가능한데 앞에서 삭제했을때는 안되는 버그.
![[스크린샷 2022-09-30 오후 2.57.26.png|500]]

2. setFormLIst is not iterable 버그 
 
 -> 
 ```jsx
 setFormList(prev => ({
    formData[
	    ...prev.formData,
	    {
		    id...
	    }
    ]
 }))
 ```

3.  공통 질문인 GlobalQestion이라는 컴포넌트는 모든 질문들에서 Import해서 사용하고 있다. 그런데 하나의 질문에 value를 입력하면 다른 질문에서도 동일한 value가 입력된다. 이걸 이름으로 분류를 해줘야하는데 어떻게 해줘야할까? 참고로 이 컴포넌트 위해서 map을 사용해서 복잡한 것 같은데 

생각
1. 구조적으로 바꿔야하는건가? 
2. 모든 질문들의 Name을 다르게 주면 될까?
![[스크린샷 2022-10-02 오후 12.17.48.png]]

_서비스를 만족하시나요?_
개선할 점이 있다면 알려주세요

http://www.kolonglobal.com/

# 기능 정리 
1. 선택 질문 항목 추가 및 삭제 기능 
2. 객관식 질문 양식 중 문제 추가 삭제 기능 
3. 폼 데이터 생성 및 삭제 기능 
4. 폼 데이터 안에서 이미지 보내는 기능 
5. 에디터 및 고객 폼 데이터 유효성 검사 기능 
6. 고객 페이지 폼데이터 생성 기능 
7. 고객 페이지 폼데이터  유효성 검사 기능 
8. 랜딩 페이지 기능


개선 방향
1. React-query를 사용해서 각 컴포넌트 안에 데이터 로직이 있도록 할 예정
2. 재사용할 수 있는 컴포넌트가 많았는데 만들기에 급급했던 나머지 중복된 코드 사용이 잦은 것.
3. 런타임 에러로 인해 화면이 아예 다운되는 경우가 많았다. 타입 스크립트 사용해야겠다는...
4. 통계페이지 같은 경우 매번 API에 요청할 필요가 있을까 싶었다. 한번 본 데이터를 가지고 있게 해서 성능을 더 빠르게 할 수 있지 않을까? 
5. 

# 왜?  


# Q and A 질문 대비
어떤 부분이 궁금할 수 있도록 할지


