## 횡단 관심사

횡단 관심사란 여러 서비스에 걸쳐서 동작해야 하는 코드를 의미합니다. 앞서 관심사란 코드가 하고자 하는 목적, 동작을 의미한다고 했습니다. 여기서 확장해서 횡단 관심사란 애플리케이션 내 여러 핵심 비지니스 로직들에 걸쳐서 실행되어야 하는 동작들을 의미합니다.

![[스크린샷 2022-11-05 오전 11.14.45.png]]

횡단 관심사의 대표적인 예시를 보자면 아래와 같습니다.

-   **인증 & 인가**
-   로깅 -> 관찰할 수 있어야한다. 로그만 남겨두는 서비스가 있다. 로깅 동작들! 버그 발견했을때 로그 까보고 알 수 있는 것.
-   트랜잭션 처리
-   에러처리

횡단 관심사를 잘 처리하는 것은 애플리케이션의 유지보수에서 중요합니다. 왜냐하면 횡단 관심사는 여러 비지니스 로직들에 걸쳐서 실행되어야 합니다. 만약, 핵심 비지니스 로직과 횡단 관심사가 혼재되어 버리면, 추후 비지니스 로직, 횡단 관심사 모두를 수정하기 힘들어지는 상황이 발생합니다.

예를 들어 내가 인증 로직이 핵심 비지니스 로직 안에 혼재된다면 일단 해당 코드의 관심사가 여러개가 된다는 문제가 발생합니다. 그리고 추후 인증 로직이 변경되었을때 이를 수정하기 위해서 여러 모듈들을 건드리거나, 수정해야 한다는 문제 또한 발생합니다.

## HTTP 통신에서 횡단 관심사 처리하기

프론트엔드에서 가장 흔하게 생각할 수 있는 횡단 관심사는 인증 & 인가입니다.

인증 & 인가는 내가 누구인지 증명하고, 그에 걸맞는 권한을 획득하는 행위를 의미합니다. 우리는 흔히 백엔드 서버와 통신하고 통신에서 가장 기본적으로 사용하는 프로토콜은 HTTP입니다.

**HTTP는 stateless**라는 특징으로 인해 매 요청을 별개의 요청으로 처리합니다. 따라서 HTTP 통신을 주고받을 때 내가 누구인지 증명하기 위해서는 프론트엔드단에서 인증 정보를 매 통신마다 함께 전송해줘야 합니다.

인증은 특정한 비지니스 로직에 포함된 것이 아니라, 대부분의 HTTP 통신을 이용하는 비지니스 로직에 걸쳐서 이루어져야 하는 동작입니다.

여러 핵심 비지니스 로직에 걸쳐서 수행되어야 하기에 이를 곧 횡단 관심사로 생각할 수 있습니다.

간단한 예제를 통해 횡단 관심사를 어떻게 처리할 지 알아봅시다!


# 관심사 혼재된 상황
![[스크린샷 2022-11-05 오전 11.20.16.png]]



## 함수와 클래스가 무엇이냐? 

- 함수는 뭐지?

일반 함수 : 코드 조각 (재사용할 수 있는 제일 작은 단위)
순수 함수 : input -> output 

- 클래스는 뭐냐? 
- 클래스 함수차이
-> state 가지고 있을 수 있다. ((property,member variables))
동작을 할 수 있게 되고  (method)

모듈 설계할때 중요한것
**-> 어떤 형태로 사용할 수 있게 제공할 것인지 생각!!!**

사고의 순서-> 
//http 통신
//fetch 함수와 동일하게 사용할 수 있또록 
//다만 내가 그 안에서 baseUrl을 설정할게
//token 알아서 넣을게 

외부에서는 baseURL의 변수에 접근하면 안된다. 
그래서 # 을 붙히면 class 안에서만 변수에 접근이 된다. private 으로 바뀜. 


axios도 클래스로 만들어진얘 그래서 instane 로 만들 수 있었던 것이었구나!!! 



