 
그림으로 보는 코드 개선점 

- [x] context API를 활용하여 로그인 관리 
src/router.js
before
```Js
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import SignIn from './pages/SiginIn';
import Todo from './pages/Todo';

const Router = () => {
  return (
    <BrowserRouter basename="/wanted-pre-onboarding-frontend">
      <Routes>
        <Route path="/" element={<SignIn />} />
        <Route path="/signup" element={<SignIn />} />
        <Route path="/todo" element={<Todo />} />
      </Routes>
    </BrowserRouter>
  );
};
```

after
```js
import { useContext, useEffect } from 'react';
import { BrowserRouter, Routes, Route, useNavigate } from 'react-router-dom';
import { LoginContext } from './context/LoginContext';
import SignIn from './pages/SiginIn';
import Todo from './pages/Todo';

const Router = () => {
  const { isLoggedIn } = useContext(LoginContext);

  const navigator = useNavigate();

  useEffect(() => {
    if (!isLoggedIn) {
      navigator('/');
    } else {
      navigator('/todo');
    }
  }, [isLoggedIn]);

  return (
    <Routes>
      <Route path="/" element={<SignIn />} />
      <Route path="/signup" element={<SignIn />} />
      <Route path="/todo" element={<Todo />} />
    </Routes>
  );
};
```

src/context/LoginContext.jsx

```js
import React, { createContext, useState, useMemo, useContext } from 'react';
import { getLocalStorage, TOKEN_NAME } from '../utils/localStorage';

export const LoginContext = createContext();

export const LoginProvider = ({ children }) => {
  const [isLoggedIn, setIsLoggedIn] = useState(
    !!getLocalStorage({ name: TOKEN_NAME })
  );
  const value = useMemo(() => ({ isLoggedIn, setIsLoggedIn }), [isLoggedIn]);

  return (
    <LoginContext.Provider value={value}>{children}</LoginContext.Provider>
  );
};

export const useAuth = () => useContext(LoginContext);
```
로그인 상태를 로컬스토리지의 토큰의 여부로 알 수 있도록 하였습니다. 최상위에 감싸주어 router에서 값을 읽어 true면 /Todo로 투두 페이지로 이동시키고 아닐경우는 로그인 페이지에 남도록 코드를 작성했습니다. 


- [x] 회원가입 , 로그인 에러핸들링


- [x] 전역 변수 제거, 임시 변수 제거 (user 부분만 제거)
src/components/User.js
```js
let token = null;

const onSubmitAuth = e => {
    e.preventDefault();
    const { email, password } = authInputs;
    const authUrl =
	const User = ({ data }) => {
      .then(res => res.json())
      .then(data => {
        if (data.access_token) {
          token = data.access_token;
          //Token 값을 바꿔준다.
          localStorage.setItem('token', token);
          navigate('/todo');
        }
```

```js
//let token = null;
//삭제

const onSubmitAuth = e => {
    e.preventDefault();
    const { email, password } = authInputs;
    const authUrl =
	const User = ({ data }) => {
      .then(res => res.json())
      .then(data => {
        if (data.access_token) {
          localStorage.setItem('token', data.access_token);
          //따로 localStorage에 관련된 유틸을 만들어 import해서 사용한다.
          navigate('/todo');
        }
```

- [x] UI 부분 수정

- [x] 데이터 로직 분리하기

- [x] 회원가입 제대로 기능 수행하도록 다시 수정 

- [x] 유효성 검사 

- [x] statement vs expression (문과 식 ) , 임시변수 제거 , let을 const로 
    -   문: 여러개의 코드 단위를 묶어서 쭉 나열한 문장
    -   표현식: 여러개의 코드 단위가 묶어서 나열한 문장인데 → 계산할 수 있고 최종적으로 하나의 값으로 평가
	before

    ```tsx
    let response = {};
    
    if (onSignIn) {
    	response = await apis.signIn({ email, password })
    } else {
      response = await apis.signUp({ email, password })
    }

```
	after
```tsx
    // response value
    const response = await (onSignIn ? apis.signIn({ email, password }) : apis.signUp({ email, password }))
```


리팩토링 하기전에는 임시변수에 조건에 해당하는 값을 넣어주는 방식으로 진행을 했습니다. 몇가지의 문제가 있다는 것을 알게 됐습니다. 우선 if문은 조건에 맞는 문을 읽는 역할을 수행하는데 전 식과 문을 잘 알지 못했기에 값을 반환하지 않는 if문으로 코드를 작성했습니다. 그래서 두가지의 잘못된 점을 리팩토링했습니다.

우선 임시 변수를 삭제하면서 let을 const 식별자로 바꿀 수 있었고 값을 취급하는 삼항 연산자를 활용해서 더욱 간결하고 논리적인 코드로 수정하였습니다. 
